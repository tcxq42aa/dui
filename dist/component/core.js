!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("@angular/core"),require("@angular/http"),require("@angular/common"),require("@angular/http/testing"));else if("function"==typeof define&&define.amd)define(["@angular/core","@angular/http","@angular/common","@angular/http/testing"],e);else{var o="object"==typeof exports?e(require("@angular/core"),require("@angular/http"),require("@angular/common"),require("@angular/http/testing")):e(t["@angular/core"],t["@angular/http"],t["@angular/common"],t["@angular/http/testing"]);for(var i in o)("object"==typeof exports?exports:t)[i]=o[i]}}(this,function(t,e,o,i){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){t.exports=o(1)},function(t,e,o){"use strict";function i(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}i(o(2)),i(o(7))},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var p=t.length-1;p>=0;p--)(n=t[p])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r},n=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=o(3),r=o(4),p=function(){function e(t,e,o){this._elementRef=e,this.ref=o,this.visible=!0,this._offset=new a,this.content=t.get("content"),this._offset=t.get("offset"),this.direction=h[h[t.get("direction")]]||h[h.bottom]}return e.prototype.show=function(t){this._offset=t,this.reLocation(),this.visible=!0,this.showEmit.emit()},e.prototype.hide=function(){this.visible=!1,this.hideEmit.emit()},e.prototype.ngAfterViewInit=function(){this.reLocation()},e.prototype.reLocation=function(){if(this.childView){switch(this.direction){case h[h.left]:this._left=this._offset.left-this.childView.nativeElement.offsetWidth-10,this._top=this._offset.top+this._offset.height/2-this.childView.nativeElement.offsetHeight/2;break;case h[h.leftBottom]:this._left=this._offset.left-this.childView.nativeElement.offsetWidth-10,this._top=this._offset.top+this._offset.height-this.childView.nativeElement.offsetHeight;break;case h[h.leftTop]:this._left=this._offset.left-this.childView.nativeElement.offsetWidth-10,this._top=this._offset.top;break;case h[h.top]:this._left=this._offset.left+this._offset.width/2-this.childView.nativeElement.offsetWidth/2,this._top=this._offset.top-this.childView.nativeElement.offsetHeight-10;break;case h[h.topLeft]:this._left=this._offset.left,this._top=this._offset.top-this.childView.nativeElement.offsetHeight-10;break;case h[h.topRight]:this._left=this._offset.left+this._offset.width-this.childView.nativeElement.offsetWidth,this._top=this._offset.top-this.childView.nativeElement.offsetHeight-10;break;case h[h.right]:this._left=this._offset.left+this._offset.width+10,this._top=this._offset.top+this._offset.height/2-this.childView.nativeElement.offsetHeight/2;break;case h[h.rightBottom]:this._left=this._offset.left+this._offset.width+10,this._top=this._offset.top+this._offset.height-this.childView.nativeElement.offsetHeight;break;case h[h.rightTop]:this._left=this._offset.left+this._offset.width+10,this._top=this._offset.top;break;case h[h.bottom]:this._left=this._offset.left+this._offset.width/2-this.childView.nativeElement.offsetWidth/2,this._top=this._offset.top+this._offset.height+10;break;case h[h.bottomLeft]:this._left=this._offset.left,this._top=this._offset.top+this._offset.height+10;break;case h[h.bottomRight]:this._left=this._offset.left+this._offset.width-this.childView.nativeElement.offsetWidth,this._top=this._offset.top+this._offset.height+10}this.ref.detectChanges()}},i([s.Output("show"),n("design:type",Object)],e.prototype,"showEmit",void 0),i([s.Output("hide"),n("design:type",Object)],e.prototype,"hideEmit",void 0),i([s.ViewChild("child"),n("design:type",s.ElementRef)],e.prototype,"childView",void 0),e=i([s.Component({moduleId:t.id,selector:"se-tips",template:o(5),styles:[o(6)]}),n("design:paramtypes",[s.Injector,s.ElementRef,s.ChangeDetectorRef])],e)}(),f=function(){function t(t,e,o,i,n){this._elementRef=t,this._componentResolver=e,this._viewContainer=o,this._renderer=i,this.http=n,this.toggle="focus",this.showEmit=new s.EventEmitter,this.hideEmit=new s.EventEmitter,this.visible=!1}return t.prototype.ngAfterContentInit=function(){var t=this;if(this.toggle){var e=this.toggle.match(/auto(?:\+(\d*))?/i);e&&setTimeout(function(){t.show()},e[1]||50)}},t.prototype.show=function(){var t=this;this.child?(this.timeout&&clearTimeout(this.timeout),this.dismiss&&(this.timeout=setTimeout(function(){t.hide()},this.dismiss)),this.child.show(this.offset(this._elementRef.nativeElement)),this.visible=!0):this.loadTip()},t.prototype.hide=function(){this.child&&this.child.hide(),this.visible=!1},t.prototype.onClick=function(t){"click"==this.toggle&&(this.visible?this.hide():this.show())},t.prototype.onFocus=function(t){"focus"==this.toggle&&this.show()},t.prototype.onBlur=function(t){"focus"==this.toggle&&this.hide()},t.prototype.onMouseEnter=function(t){"hover"==this.toggle&&this.show()},t.prototype.onMouseLeave=function(t){"hover"==this.toggle&&this.hide()},t.prototype.offset=function(t){return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}},t.prototype.loadTip=function(){var t=this;this.fetchContent().then(function(e){var o=s.ReflectiveInjector.resolveAndCreate([s.provide("content",{useValue:e}),s.provide("direction",{useValue:t.direction}),s.provide("offset",{useValue:t.offset(t._elementRef.nativeElement)})],t._viewContainer.parentInjector);t._componentResolver.resolveComponent(p).then(function(e){t.child=t._viewContainer.createComponent(e,0,o).instance,t.child.showEmit=t.showEmit,t.child.hideEmit=t.hideEmit,t._renderer.setElementProperty(t._elementRef.nativeElement,"title",""),t.show()})})},t.prototype.fetchContent=function(){var t=this;return this.remote?new Promise(function(e,o){t.http.get(t.remote).subscribe(function(t){e(t.text())})}):new Promise(function(e,o){e(t.title?t.title.innerHTML||t.title:"")})},i([s.Input(),n("design:type",Object)],t.prototype,"title",void 0),i([s.Input(),n("design:type",String)],t.prototype,"direction",void 0),i([s.Input(),n("design:type",String)],t.prototype,"toggle",void 0),i([s.Input(),n("design:type",String)],t.prototype,"remote",void 0),i([s.Input(),n("design:type",Number)],t.prototype,"dismiss",void 0),i([s.Output("show"),n("design:type",Object)],t.prototype,"showEmit",void 0),i([s.Output("hide"),n("design:type",Object)],t.prototype,"hideEmit",void 0),t=i([s.Directive({selector:"[se-tips]",host:{"(click)":"onClick($event)","(focus)":"onFocus($event)","(blur)":"onBlur($event)","(mouseenter)":"onMouseEnter($event)","(mouseleave)":"onMouseLeave($event)"},providers:[r.HTTP_PROVIDERS],exportAs:"seTip"}),n("design:paramtypes",[s.ElementRef,s.ComponentResolver,s.ViewContainerRef,s.Renderer,r.Http])],t)}();e.TipsDirective=f;var h,a=function(){function t(){}return t}();!function(t){t[t.left="left"]="left",t[t.leftTop="leftTop"]="leftTop",t[t.leftBottom="leftBottom"]="leftBottom",t[t.top="top"]="top",t[t.topLeft="topLeft"]="topLeft",t[t.topRight="topRight"]="topRight",t[t.right="right"]="right",t[t.rightTop="rightTop"]="rightTop",t[t.rightBottom="rightBottom"]="rightBottom",t[t.bottom="bottom"]="bottom",t[t.bottomLeft="bottomLeft"]="bottomLeft",t[t.bottomRight="bottomRight"]="bottomRight"}(h||(h={}))},function(e,o){e.exports=t},function(t,o){t.exports=e},function(t,e){t.exports='<div #child class="tips"\n     *ngIf="visible"\n     [ngClass]="direction"\n     [ngStyle]="{\'left\': _left + \'px\', \'top\': _top + \'px\'}" [innerHTML]="content">\n</div>'},function(t,e){t.exports='.tips {\n    z-index: 999;\n    position: absolute;\n    color: #fff;\n    background: rgba(0,0,0,0.75);\n    border-radius: 4px;\n    padding: 6px 8px;\n    white-space: nowrap;\n}\n\n.tips:after {\n    z-index: 999;\n    display: block;\n    content: \' \';\n    position: absolute;\n}\n.tips.left:after {\n    border-bottom: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-top: 5px solid transparent;\n    border-left: 5px solid rgba(0,0,0,.75);\n    top: 50%;\n    right: -10px;\n    margin-top: -5px;\n}\n.tips.right:after {\n    border-left: 5px solid transparent;\n    border-bottom: 5px solid transparent;\n    border-top: 5px solid transparent;\n    border-right: 5px solid rgba(0,0,0,.75);\n    top: 50%;\n    left: -10px;\n    margin-top: -5px;\n}\n.tips.bottom:after {\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-top: 5px solid transparent;\n    border-bottom: 5px solid rgba(0,0,0,.75);\n    left: 50%;\n    top: -10px;\n    margin-left: -5px;\n}\n.tips.top:after {\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-bottom: 5px solid transparent;\n    border-top: 5px solid rgba(0,0,0,.75);\n    left: 50%;\n    bottom: -10px;\n    margin-left: -5px;\n}\n.tips.leftTop:after,\n.tips.leftBottom:after{\n    border-top: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-bottom: 5px solid transparent;\n    border-left: 5px solid rgba(0,0,0,.75);\n    top: 50%;\n    right: -10px;\n    margin-top: -5px;\n}\n.tips.rightTop:after,\n.tips.rightBottom:after{\n    border-top: 5px solid transparent;\n    border-left: 5px solid transparent;\n    border-bottom: 5px solid transparent;\n    border-right: 5px solid rgba(0,0,0,.75);\n    top: 50%;\n    left: -10px;\n    margin-top: -5px;\n}\n.tips[class*="leftBottom"]:after,\n.tips[class*="rightBottom"]:after{\n    top: auto;\n    bottom: 10px;\n    margin-top: 0;\n}\n.tips[class*="leftTop"]:after,\n.tips[class*="rightTop"]:after{\n    top: 10px;\n    margin-top: 0;\n}\n\n.tips.topLeft:after,\n.tips.topRight:after{\n    border-right: 5px solid transparent;\n    border-left: 5px solid transparent;\n    border-bottom: 5px solid transparent;\n    border-top: 5px solid rgba(0,0,0,.75);\n}\n.tips[class*="topLeft"]:after {\n    top: auto;\n    bottom: -10px;\n    left: 10px;\n}\n.tips[class*="topRight"]:after{\n    top: auto;\n    left: auto;\n    bottom: -10px;\n    right: 10px;\n}\n.tips.bottomLeft:after,\n.tips.bottomRight:after{\n    border-right: 5px solid transparent;\n    border-left: 5px solid transparent;\n    border-top: 5px solid transparent;\n    border-bottom: 5px solid rgba(0,0,0,.75);\n}\n.tips[class*="bottomLeft"]:after {\n    left: 10px;\n    top: -10px;\n}\n.tips[class*="bottomRight"]:after{\n    top: -10px;\n    left: auto;\n    right: 10px;\n}'},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var p=t.length-1;p>=0;p--)(n=t[p])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r},n=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(o,i){e(o,i,t)}},r=o(3),p=o(4),f=o(8),h=o(9),a=function(){function t(t,e){this._el=e,this.visible=!1,this.selectCallback=new r.EventEmitter,this.optionKey=t.get("optionKey"),this.selectCallback=t.get("selectCallback")}return t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(t){this._el.nativeElement.contains(t)||(this.visible=!1)},t.prototype.update=function(t){this._list=t,this._list&&this._list.length>0?this.visible=!0:this.visible=!1},t.prototype.selectItem=function(t){this.visible=!1,this.selectCallback.emit(t)},t=i([r.Component({selector:"se-autocomplete",template:'\n        <div class="autocomplete">\n        <ul *ngIf="visible">\n            <li *ngFor="let item of _list; let i = index" (click)="selectItem(item)">\n                <a href="javascript:;">{{optionFn ? optionFn(item) : item[optionKey]}}</a>\n            </li>\n        </ul></div>',styles:["\n        .autocomplete, .autocomplete * {\n            box-sizing: border-box;\n        }\n        .autocomplete {\n            position: relative;\n        }\n        .autocomplete ul a {\n            display: block;\n            color: #0088cc;\n            text-decoration: none;\n            padding: 5px 12px;\n        }\n        .autocomplete ul a:hover {\n            background: #D3EBFD;\n        }\n        input:focus {\n            outline: none;\n        }\n        ul {\n            padding: 0;\n            margin: 0;\n            list-style: none;\n            position: absolute;\n            top: 100%;\n            left: 0;\n            right: 0;\n            border: 1px solid #777;\n            background: #FFF;\n            max-height: 256px;\n            overflow-y: auto;\n            overflow-x: hidden;\n            z-index: 900;\n            min-width: 200px;\n            font-size: 12px;\n        }\n    "]}),n("design:paramtypes",[r.Injector,r.ElementRef])],t)}();e.AutoCompleteComponent=a;var l=new r.Provider(f.NG_VALUE_ACCESSOR,{useExisting:r.forwardRef(function(){return c}),multi:!0}),c=function(){function t(t,e,o,i,n){this._componentResolver=t,this._viewContainerRef=e,this._elementRef=o,this._http=i,this.backend=n,this.queryOnFocus="false",this.keyword="keyword",this.selectCallback=new r.EventEmitter,this.update=function(){},n&&(this._http=new p.Http(n,new p.BaseRequestOptions))}return t.prototype.writeValue=function(t){this.model=t,this.model&&(this._elementRef.nativeElement.value=this.model[this.optionKey])},t.prototype.registerOnChange=function(t){this.update=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this,e=r.ReflectiveInjector.resolveAndCreate([r.provide("optionKey",{useValue:this.optionKey}),r.provide("selectCallback",{useValue:this.selectCallback}),r.provide("optionFn",{useValue:this.optionFn})],this._viewContainerRef.parentInjector);this._componentResolver.resolveComponent(a).then(function(o){t.childView=t._viewContainerRef.createComponent(o,0,e).instance}),this.selectCallback.subscribe(function(e){t._elementRef.nativeElement.value=e[t.optionKey],t.model=Object.assign({},e),t.update(t.model)})},t.prototype.onFocus=function(t){"false"!==this.queryOnFocus&&this.getData(t,!1)},t.prototype.onBlur=function(t){this.childView.hide(t.relatedTarget)},t.prototype.getData=function(t,e){var o=this;if(this.url){var i=void 0;if("string"==typeof this.params)i=new p.URLSearchParams(this.params);else if("object"==typeof this.params){i=new p.URLSearchParams;for(var n in this.params)i.set(n,this.params[n])}else i=new p.URLSearchParams;i.set(this.keyword,t),this._http.get(this.url,{search:i}).subscribe(function(t){var e=t.json();o.resultKey&&(e=e[o.resultKey]),o.childView.update(e)})}else if(this.data){var s=[];this.data.forEach(function(e){e[o.optionKey].indexOf(t)>=0&&s.push(e)}),this.childView.update(s)}e&&this.model&&(this.model[this.optionKey]=t,this.update(this.model))},i([r.Input(),n("design:type",String)],t.prototype,"queryOnFocus",void 0),i([r.Input(),n("design:type",String)],t.prototype,"url",void 0),i([r.Input(),n("design:type",Array)],t.prototype,"data",void 0),i([r.Input(),n("design:type",Object)],t.prototype,"params",void 0),i([r.Input(),n("design:type",String)],t.prototype,"keyword",void 0),i([r.Input(),n("design:type",String)],t.prototype,"resultKey",void 0),i([r.Input(),n("design:type",String)],t.prototype,"optionKey",void 0),i([r.Input(),n("design:type",Function)],t.prototype,"optionFn",void 0),i([r.Output(),n("design:type",Object)],t.prototype,"selectCallback",void 0),t=i([r.Directive({selector:"input[type=autocomplete]",host:{"(input)":"getData($event.target.value, true)","(focus)":"onFocus($event.target.value)","(blur)":"onBlur($event)"},providers:[l,p.HTTP_PROVIDERS]}),s(4,r.Optional()),n("design:paramtypes",[r.ComponentResolver,r.ViewContainerRef,r.ElementRef,p.Http,h.MockBackend])],t)}();e.AutoCompleteDirective=c},function(t,e){t.exports=o},function(t,e){t.exports=i}])});
//# sourceMappingURL=core.js.map